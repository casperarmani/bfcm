{% for message in messages %}
<div class="chat {% if message.chat_type == 'user' %}chat-end{% else %}chat-start{% endif %}">
    <div class="chat-header">
        {{ 'You' if message.chat_type == 'user' else 'Chatbot' }}
        <time class="text-xs opacity-50">
            {% if message.TIMESTAMP %}
                {% if message.TIMESTAMP is string %}
                    {{ message.TIMESTAMP|string|truncate(19, True, '')|replace('T', ' ') }}
                {% else %}
                    {{ message.TIMESTAMP.strftime('%I:%M %p') }}
                {% endif %}
            {% else %}
                Unknown time
            {% endif %}
        </time>
    </div>
    <div class="chat-bubble {% if message.chat_type == 'user' %}chat-bubble-primary{% else %}chat-bubble-secondary{% endif %}">
        {{ message.message }}
    </div>
</div>
{% endfor %}
